{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport React from \"react\";\nimport { Link, TextField, Checkbox, Button, RadioButton, Stack, Heading, Page } from '@shopify/polaris';\nimport store from 'store-js';\nimport Cookies from 'js-cookie';\nimport '../stylesheets/dashboard.css';\n\nvar Dashboard =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Dashboard, _React$Component);\n\n  function Dashboard() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Dashboard);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Dashboard)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      widgets: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", function () {\n      // fetch(`https://app.trytada.com/getAllWidgets`, {\n      fetch(\"https://71081b6b.ngrok.io/getAllWidgets\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          shop: Cookies.get('shopOrigin')\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (json) {\n        if (json.error) {\n          return;\n        }\n\n        if (json) {\n          _this.setState({\n            widgets: json\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"showMenu\", function (key) {});\n\n    _defineProperty(_assertThisInitialized(_this), \"createNewWidget\", function () {\n      window.location.href = '/create';\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"pauseWidget\", function (widget, key) {\n      fetch(\"https://app.trytada.com/pauseWidget\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          widget_id: widget.id,\n          pause: pause\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (json) {\n        if (json.error) {\n          return;\n        }\n\n        if (json) {\n          var widgets = _this.state.widgets;\n          widgets[key].pause = !widgets[key].pause;\n\n          _this.setState({\n            widgets: widgets\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"deleteWidget\", function (widget, key) {\n      ch(\"https://app.trytada.com/deleteWidget\", {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          widget_id: widget.id\n        })\n      }).then(function (resp) {\n        return resp.json();\n      }).then(function (json) {\n        if (json.error) {\n          return;\n        }\n\n        if (json) {\n          var widgets = _this.state.widgets;\n          delete widgets[key];\n\n          _this.setState({\n            widgets: widgets\n          });\n        }\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Dashboard, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var widgets = this.state.widgets;\n      return React.createElement(Page, {\n        title: \"Tada Dashboard\"\n      }, React.createElement(Heading, null, \"Recent Widgets\"), React.createElement(\"div\", {\n        className: \"display-setting\"\n      }, widgets.length == 0 ? React.createElement(\"div\", null, \"No recent widgets!\") : widgets.map(function (widget, key) {\n        if (key < 2) {\n          return React.createElement(\"div\", {\n            className: \"dashboard-widget\",\n            onClick: function onClick() {\n              return _this2.showMenu(key);\n            }\n          }, React.createElement(\"div\", null, widget.type), React.createElement(\"div\", null, React.createElement(\"h3\", null, widget.name), React.createElement(\"p\", null, widget.pause ? 'On Hold' : 'Active'), React.createElement(\"p\", null, \"Last modified: \", widget.created_at)));\n        } else if (key == 2) {\n          return React.createElement(\"div\", {\n            className: \"dashboard-all-widget\"\n          }, React.createElement(Button, null, \"All Widgets\"));\n        }\n      })), React.createElement(Button, {\n        onClick: function onClick() {\n          return _this2.createNewWidget();\n        },\n        primary: true\n      }, \"Create New Widget\"));\n    }\n  }]);\n\n  return Dashboard;\n}(React.Component);\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/dev/Documents/Git/tadaShopify/pages/dashboard.js"],"names":["Link","TextField","Checkbox","Button","RadioButton","Stack","Heading","Page","store","Cookies","Dashboard","widgets","fetch","method","headers","body","shop","get","then","resp","json","error","setState","key","window","location","href","widget","widget_id","id","pause","state","ch","length","map","showMenu","type","name","created_at","createNewWidget","React","Component"],"mappings":"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","sourcesContent":["import { Link, TextField, Checkbox, Button, RadioButton, Stack, Heading, Page } from '@shopify/polaris';\nimport store from 'store-js';\nimport Cookies from 'js-cookie';\nimport '../stylesheets/dashboard.css';\n\nclass Dashboard extends React.Component {\n  state = { widgets: [] };\n\n  componentDidMount = () => {\n    // fetch(`https://app.trytada.com/getAllWidgets`, {\n    fetch(`https://71081b6b.ngrok.io/getAllWidgets`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        shop: Cookies.get('shopOrigin')\n      })\n    })\n    .then(resp => resp.json())\n    .then(json => {\n      if(json.error) {\n        return;\n      }\n      if(json) {\n\n        this.setState({\n          widgets: json\n        });\n      }\n    });\n  }\n\n  render() {\n      const { widgets } = this.state;\n    return (\n      <Page\n        title=\"Tada Dashboard\"\n      >\n        <Heading>Recent Widgets</Heading>\n        <div className=\"display-setting\">\n            { (widgets.length == 0)?(\n              <div>\n                No recent widgets!\n              </div>\n            ):(\n              widgets.map((widget, key) => {\n                if(key < 2 ) {\n                  return (<div className=\"dashboard-widget\" onClick={() => this.showMenu(key)}>\n                      <div>{widget.type}</div>\n                      <div>\n                          <h3>{widget.name}</h3>\n                          <p>{(widget.pause)?'On Hold':'Active'}</p>\n                          <p>Last modified: {widget.created_at}</p>\n                      </div>\n                  </div>);\n                } else if (key == 2) {\n                  return <div className=\"dashboard-all-widget\">\n                      <Button>All Widgets</Button>\n                    </div>\n                }\n              })\n            )}\n        </div>\n        <Button onClick={() => this.createNewWidget()} primary>Create New Widget</Button>\n    </Page>\n    )\n  }\n\n  showMenu = (key) => {\n\n  }\n\n  createNewWidget = () => {\n      window.location.href = '/create';\n  }\n\n  pauseWidget = (widget, key) => {\n\n    fetch(`https://app.trytada.com/pauseWidget`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        widget_id: widget.id,\n        pause: pause\n      })\n    })\n    .then(resp => resp.json())\n    .then(json => {\n      if(json.error) {\n        return;\n      }\n      if(json) {\n        var widgets = this.state.widgets;\n        widgets[key].pause = !widgets[key].pause\n        this.setState({\n          widgets: widgets\n        });\n      }\n    });\n  }\n\n  deleteWidget = (widget, key) => {\n    ch(`https://app.trytada.com/deleteWidget`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          widget_id: widget.id,\n        })\n      })\n      .then(resp => resp.json())\n      .then(json => {\n        if(json.error) {\n          return;\n        }\n        if(json) {\n          var widgets = this.state.widgets;\n          delete widgets[key];\n          this.setState({\n            widgets: widgets\n          });\n        }\n      });\n  }\n}\n\nexport default Dashboard;"]},"metadata":{},"sourceType":"module"}